<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Garments ERP Pro - Full Editable + DPR</title>
<style>
body{font-family:'Segoe UI',Tahoma,sans-serif;margin:0;background:#f4f6f8;color:#111}
header{background:linear-gradient(90deg,#2563eb,#3b82f6);color:#fff;padding:15px;box-shadow:0 2px 6px rgba(0,0,0,0.2)}
header h2{margin:0;font-weight:600}
nav{margin-top:10px}
nav button{margin-right:8px;padding:8px 14px;border:none;cursor:pointer;border-radius:5px;background:#1d4ed8;color:#fff;transition:0.3s}
nav button:hover{background:#2563eb}
section{display:none;padding:20px;transition:0.3s}
.active{display:block}
.card{background:#fff;padding:20px;margin-bottom:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.08)}
h3,h4{margin-top:0;color:#1e293b}
input,select{width:100%;padding:8px;margin-bottom:8px;border:1px solid #cbd5e1;border-radius:6px;outline:none;transition:0.2s}
input:focus,select:focus{border-color:#2563eb;box-shadow:0 0 6px rgba(37,99,235,0.3)}
button{padding:6px 12px;border:none;color:#fff;cursor:pointer;border-radius:6px;transition:0.3s}
button:hover{opacity:0.9}
.kpi{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;margin-bottom:20px}
.kpi div{background:linear-gradient(120deg,#3b82f6,#60a5fa);color:#fff;padding:20px;text-align:center;font-size:16px;font-weight:600;border-radius:10px;transition:0.3s}
.kpi div:hover{transform:scale(1.05)}
table{width:100%;border-collapse:collapse;font-size:13px;margin-top:10px}
th,td{border:1px solid #cbd5e1;padding:6px;text-align:center}
th{background:#1e293b;color:#fff;position:sticky;top:0;z-index:1}
tbody tr:hover{background:#f1f5f9}
tfoot td{font-weight:bold;background:#e2e8f0}
.sunday{background:#fef3c7}
.highlight-red{background:#fca5a5}
.highlight-green{background:#86efac}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;overflow:auto}
.modal-content{background:#fff;margin:50px auto;padding:20px;width:95%;max-width:850px;border-radius:10px;position:relative;box-shadow:0 6px 20px rgba(0,0,0,0.25)}
.close{position:absolute;right:15px;top:10px;cursor:pointer;color:#dc2626;font-weight:bold;font-size:18px}
#chartContainer{width:100%;max-width:900px;margin-top:20px}
.editBtn{background:#16a34a;margin-right:4px}
.delBtn{background:#dc2626}
</style>
</head>
<body>

<header>
<h2>üßµ Garments ERP Pro</h2>
<nav>
<button onclick="show('dashboard')">Dashboard</button>
<button onclick="show('booking')">Booking</button>
<button onclick="show('production')">Production</button>
<button onclick="show('dpr')">Daily Production Report</button>
</nav>
</header>

<!-- DASHBOARD -->
<section id="dashboard" class="active">
<div class="kpi">
<div>Total Orders<br><b id="kpiOrders">0</b></div>
<div>Total Qty<br><b id="kpiQty">0</b></div>
<div>Urgent Orders<br><b id="kpiUrgent">0</b></div>
<div>In Production<br><b id="kpiProd">0</b></div>
</div>
</section>

<!-- BOOKING -->
<section id="booking">
<div class="card">
<h3>üìã Booking Sheet</h3>
<input id="customer" placeholder="Customer">
<input id="orderNo" placeholder="Order No (NSPL#)">
<input id="style" placeholder="Style #">
<input id="wash" placeholder="Wash">
<input id="qty" type="number" placeholder="Order Qty">
<input id="fabric" placeholder="Fabric Code">
<input id="exDate" type="date">
<input id="bookDate" type="date">
<button onclick="saveBooking()" style="background:#2563eb">Save Booking</button>
</div>
<div class="card">
<table>
<thead>
<tr>
<th>Customer</th><th>Order</th><th>Style</th><th>Qty</th><th>Ex-Factory</th><th>Action</th>
</tr>
</thead>
<tbody id="bookingList"></tbody>
</table>
</div>
</section>

<!-- PRODUCTION -->
<section id="production">
<div class="card">
<h3>üè≠ Production Status</h3>
<b>Date:</b> <span id="nowDate"></span><br><br>
<input id="pOrderNo" placeholder="Enter Order No (NSPL#)">
<select id="depSelect">
<option value="Cutting">Cutting</option>
<option value="Sewing">Sewing</option>
<option value="Washing">Washing</option>
<option value="Finishing">Finishing</option>
<option value="Packing">Packing</option>
<option value="Dispatched">Dispatched</option>
</select>
<input id="depQty" type="number" placeholder="Enter Qty">
<button onclick="addDepartmentQty()" style="background:#2563eb">Add Qty</button>
<button onclick="viewOrderHistory()" style="background:#10b981">View History</button>
</div>
<div class="card">
<table>
<thead>
<tr>
<th>Order No</th><th>Customer</th><th>Order Qty</th>
<th>Total Cutting</th><th>BL Cutting</th>
<th>Total Sewing</th><th>BL Sewing</th>
<th>Total Washing</th><th>BL Washing</th>
<th>Total Finishing</th><th>BL Finishing</th>
<th>Total Packing</th><th>BL Packing</th>
<th>Total Dispatched</th><th>BL Dispatched</th>
<th>Action</th>
</tr>
</thead>
<tbody id="prodStatusTable"></tbody>
</table>
</div>
</section>

<!-- HISTORY MODAL -->
<div id="historyModal" class="modal">
<div class="modal-content">
<span class="close" onclick="closeModal()">√ó</span>
<h3>Order Production History</h3>
<table id="historyTable" style="width:100%;border-collapse:collapse">
<thead><tr><th>Date</th><th>Department</th><th>Qty</th><th>Action</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>

<!-- DPR -->
<section id="dpr">
<div class="card">
<h3>üìä Daily Production Report</h3>
<label>Select Month:</label>
<input type="month" id="dprMonth" onchange="renderDPR()">
<br><br>
<label>Monthly Target:</label>
<input type="number" id="monthlyTarget" placeholder="Enter Monthly Target" oninput="renderDPR()">
<button onclick="exportPDF()" style="background:#2563eb;margin-top:5px">Export PDF</button>
</div>

<div class="card">
<h4>üìà Avg Production / Day</h4>
<div id="avgPerDay"></div>
</div>

<div class="card">
<h4>üè≠ Department Totals</h4>
<div id="deptTotals"></div>
</div>

<div class="card">
<table id="dprTable">
<thead>
<tr>
<th>Date</th>
<th>Cutting</th>
<th>Sew L1</th><th>Sew L2</th><th>Sew L3</th><th>Total Sewing</th>
<th>Wash A</th><th>Wash B</th><th>Wash C</th><th>Total Washing</th>
<th>Finishing</th>
<th>Pack M</th><th>Pack E</th><th>Total Packing</th>
<th>Shipment</th>
<th>Action</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr id="dprTotals">
<td>TOTAL</td>
<td id="tCut">0</td>
<td id="tS1">0</td><td id="tS2">0</td><td id="tS3">0</td><td id="tSew">0</td>
<td id="tWA">0</td><td id="tWB">0</td><td id="tWC">0</td><td id="tWash">0</td>
<td id="tFinishing">0</td>
<td id="tPM">0</td><td id="tPE">0</td><td id="tPack">0</td>
<td id="tShip">0</td>
<td></td>
</tr>
</tfoot>
</table>
</div>

<div class="card" id="chartContainer">
<canvas id="deptChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// JavaScript code: Booking, Production Status, History modal, DPR, Charts, PDF export
// (Same logic as previous version, extended to DPR edit/delete + charts + PDF)
</script>

</body>
</html>
